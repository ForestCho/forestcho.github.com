<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Hexo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://38sr.com/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
    

    
        <link rel="alternate" href="/" title="Hexo" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Hexo</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Buscar" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Entradas',
            PAGES: 'Pages',
            CATEGORIES: 'Categorias',
            TAGS: 'Etiquetas',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Buscar" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">ForestCho</h2>
            <h3 id="title"></h3>
            <span id="location"><i class="fa fa-map-marker"></i>Guangzhou, China</span>
            <a id="follow" target="_blank" href="https://github.com/ForestCho/">SEGUIR</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                69
                <span>Entradas</span>
            </div>
            <div class="article-info-block">
                128
                <span>Etiquetas</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/ForestCho/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-用FusionCharts代替JFreeChart画图表" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2014/06/06/用FusionCharts代替JFreeChart画图表/">用FusionCharts代替JFreeChart画图表</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2014/06/06/用FusionCharts代替JFreeChart画图表/">
            <time datetime="2014-06-06T01:48:19.000Z" itemprop="datePublished">2014-06-06</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/畅游互联网/">畅游互联网</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/FusionCharts/">FusionCharts</a>, <a class="tag-link" href="/tags/JFreeChart/">JFreeChart</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>近来用<code>olap</code>做联机分析处理。当我从网上下载下来一个工程的时候发现这个工程原本用的制图工具jpivot制出来的图比较糙，不够清晰。竟发现<code>jpivot</code>底层用的是<code>jfreechart</code>,当时跟一网友聊天，他向我推荐FusionCharts,说这个比较好，于是就来了解下。</p>
<h2 id="FusionCharts"><a href="#FusionCharts" class="headerlink" title="FusionCharts"></a>FusionCharts</h2><p>是一个跨浏览器和跨平台的flash和javascript图表组件，能够被 ASP.NET, ASP, PHP, JSP, ColdFusion, Ruby on Rails, 简单 HTML 页面 甚至PPT调用. 几乎所有你知道的语言它都支持。</p>
<h2 id="JFreeChart"><a href="#JFreeChart" class="headerlink" title="JFreeChart"></a>JFreeChart</h2><p>是一个开源java图表库，让开发者能够很容易在程序里面显示高质量的图表。 JFreeChart 项目从7年前便开始了，起始于 2000 年1月, 已经有四五万开发者已经使用了JFreeChart。JFreeChart 支持很多种图形文件格式： JPEG, GIF, PDF, EPS and SVG. 这对于java开发者是一个很好的资源。</p>
<h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><p>他们的区别在于jFreeChart是直接生成一张非矢量图，而FusionCharts用标签或者视频代替生成一张图片，这样子的话，当页面放大时，图还是很清楚。当然jFreeChart上手快，方便方面也是其优点。jFreeChart是完全开源的，这点很赞。FusionCharts提供一个无限期的试用版本，很好很强大。</p>
<h2 id="FusionCharts用法"><a href="#FusionCharts用法" class="headerlink" title="FusionCharts用法"></a>FusionCharts用法</h2><ol>
<li>首先到官网把FusionCharts         XTVersion:3.3.1<a href="http://www.fusioncharts.com/downloads/Evals/FusionCharts_XT_Evaluation.zip" target="_blank" rel="noopener">下载</a>，下来先，他还提供了FusionWidgets XT，PowerCharts XT，FusionMaps XT集中不同的产品，我暂时还没用到。</li>
<li>新建一个LearningFusionCharts的文件夹，然后在其目录下再新建一个MyFirstChart的文件夹。在MyFirstChart下新建一个存放各种js，和swf的文件夹FusionCharts</li>
<li>将 Column3D.swf 从 Charts目录下copy到 FusionCharts  ，然后将FusionCharts.js, FusionCharts.HC.js, FusionCharts.HC.Charts.js 和 jquery.min.js也copy到FusionCharts下面去</li>
<li><p>在MyFirestChart下新建index.html并输入如下内容 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;        </span><br><span class="line">&lt;title&gt;My First chart using FusionCharts XT - JSON data URL&lt;/title&gt;         </span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;FusionCharts/FusionCharts.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;   </span><br><span class="line">&lt;body&gt;     </span><br><span class="line">&lt;div id=&quot;chartContainer&quot;&gt;FusionCharts XT will load here!&lt;/div&gt;          </span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;&lt;!--         </span><br><span class="line">var myChart = new FusionCharts( &quot;FusionCharts/Column3D.swf&quot;,&quot;myChartId&quot;, &quot;400&quot;, &quot;300&quot;, &quot;0&quot; );</span><br><span class="line">myChart.setXMLUrl(&quot;Data.xml&quot;);</span><br><span class="line">myChart.render(&quot;chartContainer&quot;);          </span><br><span class="line">// --&gt;     </span><br><span class="line">&lt;/script&gt;      </span><br><span class="line">&lt;/body&gt; </span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>这段代码会图表会以flash的形式呈现，如果你的浏览器不支持flash才会进行javascript渲染，如果你想以纯javascript渲染的图，应该将上面的代码替换为下面这段代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    &lt;html&gt;</span><br><span class="line">  &lt;head&gt;        </span><br><span class="line">    &lt;title&gt;My First chart using FusionCharts XT&lt;/title&gt;         </span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;FusionCharts/FusionCharts.js&quot;&gt;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">  &lt;/head&gt;   </span><br><span class="line">  &lt;body&gt;     </span><br><span class="line">    &lt;div id=&quot;chartContainer&quot;&gt;FusionCharts XT will load here!&lt;/div&gt;          </span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;&lt;!--         </span><br><span class="line">  FusionCharts.setCurrentRenderer(&apos;javascript&apos;);</span><br><span class="line">      var myChart = new FusionCharts( &quot;Column3D&quot;, </span><br><span class="line">      &quot;myChartId&quot;, &quot;400&quot;, &quot;300&quot;, &quot;0&quot; );</span><br><span class="line">      myChart.setXMLUrl(&quot;Data.xml&quot;);</span><br><span class="line">      myChart.render(&quot;chartContainer&quot;);</span><br><span class="line">      </span><br><span class="line">    // --&gt;     </span><br><span class="line">    &lt;/script&gt;      </span><br><span class="line">  &lt;/body&gt; </span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>页面准备好了，接下来准备数据，FusionCharts支持json和xml两种不同格式的数据。在MyFirestChart新建Data.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;chart caption=&apos;Weekly Sales Summary&apos;</span><br><span class="line">xAxisName=&apos;Week&apos; yAxisName=&apos;Amount&apos; numberPrefix=&apos;$&apos;&gt;</span><br><span class="line">  &lt;set label=&apos;Week 1&apos; value=&apos;14400&apos; /&gt;</span><br><span class="line">  &lt;set label=&apos;Week 2&apos; value=&apos;19600&apos; /&gt;</span><br><span class="line">  &lt;set label=&apos;Week 3&apos; value=&apos;24000&apos; /&gt;</span><br><span class="line">  &lt;set label=&apos;Week 4&apos; value=&apos;15700&apos; /&gt;</span><br><span class="line">&lt;/chart&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>当我再常识用json代替xml时发现<code>error in loading data</code>。</p>
<p>发现官网提供的资料有关于这一问题的说明：</p>
<ol>
<li>Many Web servers like IIS6, does not supply .json (no wildcard MIME type) files by default. You will need to setup your Web server to supply json files. In IIS6, you can do this using these steps: Open the properties for the server in IIS Manager and click MIME Types Click “New”. Enter “JSON” for the extension and “application/json” for the MIME type</li>
<li>Many browsers restrict JavaScript from accessing local file system owing to security reasons. The JavaScript charts, when running locally, will not be able to access data provided as a URL. If you run the files from a server, it will run absolutely fine, though. When running locally, however, if you provide the data as string (using the Data String method), it works fine.  Click here to see the code using the Data String method »</li>
</ol>
<p>大致就是说很多iis6服务器不支持，很多浏览器由于安全原因不支持javascript读取本地的文件系统，于是把这个网页部署到j2ee工程即可看到效果。<br>用jfreechart生成的图片<br><img src="/pic/jfreechart.png" alt="jfreechart"><br>用fusionchart生成的图，虽然不是一样的数据，但感觉还是明显的不一样<br><img src="/pic/fusionchart.jpg" alt="fusionchart"><br>你可以在原页面尝试看到效果后滚动鼠标放大页面看看，图表的棱角都很清晰</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://38sr.com/2014/06/06/用FusionCharts代替JFreeChart画图表/" data-id="cjbc9sv2m004oyoqbq5vsrek0" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-hexo主题支持编辑数学公式" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2014/06/04/hexo主题支持编辑数学公式/">hexo博客支持编辑数学公式</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2014/06/04/hexo主题支持编辑数学公式/">
            <time datetime="2014-06-04T14:12:32.000Z" itemprop="datePublished">2014-06-04</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/畅游互联网/">畅游互联网</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/hexo/">hexo</a>, <a class="tag-link" href="/tags/mathjax/">mathjax</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>虽不是经常跟数学公式打交道，但一旦需要让网页上出现数学公式只能截图，再插入到文章中，想想都觉得麻烦，在网上搜到一种很好的方法来解决这个问题．<br>这种工具就是<a href="http://www.mathjax.org/" target="_blank" rel="noopener">mathjax</a>,它能很好的在所有的浏览器中很好的显示数学公式，而且用起来很方便．只需要在页面中加入一段javascript的引用代码即可.</p>
<h2 id="新建ejs"><a href="#新建ejs" class="headerlink" title="新建ejs"></a>新建ejs</h2><p>在<code>themename\layout\_partial\</code>下面新建<code>mathjax.ejs</code>的文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/x-mathjax-config"</span>&gt;</span><br><span class="line">  MathJax.Hub.Config(&#123;</span><br><span class="line">    tex2jax: &#123;</span><br><span class="line">      inlineMath: [ [<span class="string">'$'</span>,<span class="string">'$'</span>], [<span class="string">"\\("</span>,<span class="string">"\\)"</span>] ],</span><br><span class="line">      processEscapes: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script type="text/</span>x-mathjax-config<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    MathJax.Hub.Config(&#123;</span></span><br><span class="line"><span class="string">      tex2jax: &#123;</span></span><br><span class="line"><span class="string">        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;script type="</span>text/x-mathjax-config<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    MathJax.Hub.Queue(function() &#123;</span></span><br><span class="line"><span class="string">        var all = MathJax.Hub.getAllJax(), i;</span></span><br><span class="line"><span class="string">        for(i=0; i &lt; all.length; i += 1) &#123;</span></span><br><span class="line"><span class="string">            all[i].SourceElement().parentNode.className += ' has-jax';</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;script type="</span>text/javascript<span class="string">" src="</span>http:<span class="comment">//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"&gt;</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>从上面的代码可以看出公式渲染什么情况下有用，什么情况下会失效．</p>
<h2 id="在页面中加入"><a href="#在页面中加入" class="headerlink" title="在页面中加入"></a>在页面中加入</h2><p>同样也在<code>themename\layout\_partial\</code>这个目录下面的<code>after_foot.ejs</code>中引入新建的文件<code>mathjax.ejs</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- partial(&apos;mathjax&apos;) %&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="输入几个公式过过瘾"><a href="#输入几个公式过过瘾" class="headerlink" title="输入几个公式过过瘾"></a>输入几个公式过过瘾</h2><p>编辑公式的时候可以输入<code>$$</code>，也可以输入双反斜杠<br>广州恒大去年亚冠决赛海报上的两个数学公式</p>
<ol>
<li><code>\\(\sqrt{1+2\sqrt{1+3\sqrt{1+4\sqrt{1+...}}}}=?\\)</code><br>\(\sqrt{1+2\sqrt{1+3\sqrt{1+4\sqrt{1+…}}}}=?\)</li>
<li><code>$e^{\pi i}+1=?$</code><br>$e^{\pi i}+1=?$</li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://38sr.com/2014/06/04/hexo主题支持编辑数学公式/" data-id="cjbc9suy10010yoqb1yjdhfm3" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-补上庐山游的照片" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2014/06/02/补上庐山游的照片/">补上上次庐山游的照片</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2014/06/02/补上庐山游的照片/">
            <time datetime="2014-06-02T05:12:32.000Z" itemprop="datePublished">2014-06-02</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/生活小记/">生活小记</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>上次跟同门一同去九江，一路看到了名江(长江),名湖(鄱阳湖),名山(庐山)，拍了不少照片。把照片都存放到flickr,发现一个很奇怪的事情，没法在flickr的界面上获得这些图片的地址，只能查看源码获得．<br><img src="https://c2.staticflickr.com/6/5523/14346412843_5fb1699217_z.jpg" alt="到达九江站">　　</p>
<blockquote>
<p>到达九江站</p>
</blockquote>
<hr>
<p><img src="https://c2.staticflickr.com/6/5475/14140069968_2ded167e5b_z.jpg" alt="长江就在眼前"></p>
<blockquote>
<p>长江就在眼前　</p>
</blockquote>
<hr>
<p><img src="https://c1.staticflickr.com/3/2920/14346409943_2809260256_z.jpg" alt="长江岸边的索江楼"></p>
<blockquote>
<p>长江岸边的索江楼</p>
</blockquote>
<hr>
<p><img src="https://c1.staticflickr.com/3/2910/14139554010_0474d3f4b5_z.jpg" alt="庐山别墅"></p>
<blockquote>
<p>庐山别墅</p>
</blockquote>
<hr>
<p><img src="https://c2.staticflickr.com/6/5500/14346363983_b79c2b2592_z.jpg" alt="庐山别墅"></p>
<blockquote>
<p>庐山别墅</p>
</blockquote>
<hr>
<p><img src="https://c2.staticflickr.com/6/5496/14324410222_c8c28db11f_z.jpg" alt="庐山别墅"></p>
<blockquote>
<p>庐山别墅</p>
</blockquote>
<hr>
<p><img src="https://c1.staticflickr.com/3/2912/14139518528_c82abaec40_z.jpg" alt="庐山别墅"></p>
<blockquote>
<p>庐山别墅</p>
</blockquote>
<hr>
<p><img src="https://c2.staticflickr.com/6/5578/14324416342_247b510475_z.jpg" alt="阶梯小道"></p>
<blockquote>
<p>阶梯小道</p>
</blockquote>
<hr>
<p><img src="https://c1.staticflickr.com/3/2910/14139569870_b7761db379_z.jpg" alt="庐山别墅"></p>
<blockquote>
<p>庐山别墅</p>
</blockquote>
<hr>
<p><img src="https://c1.staticflickr.com/3/2940/14303047806_6aa515671a_z.jpg" alt="庐山别墅述"></p>
<blockquote>
<p>庐山别墅</p>
</blockquote>
<hr>
<p><img src="https://c1.staticflickr.com/3/2918/14325516694_08b1a49650_z.jpg" alt="庐山别墅"></p>
<blockquote>
<p>庐山别墅</p>
</blockquote>
<hr>
<p><img src="https://c2.staticflickr.com/6/5504/14139582260_41c7353cdb_z.jpg" alt="如琴湖"></p>
<blockquote>
<p>如琴湖</p>
</blockquote>
<hr>
<p><img src="https://c2.staticflickr.com/6/5504/14139582260_41c7353cdb_z.jpg" alt="如琴湖"></p>
<blockquote>
<p>如琴湖</p>
</blockquote>
<p><img src="https://c1.staticflickr.com/3/2905/14139685437_e18165da09_z.jpg" alt="鄱阳湖"></p>
<blockquote>
<p>鄱阳湖</p>
</blockquote>
<hr>
<p><img src="https://c1.staticflickr.com/3/2900/14139552508_e2359ef86d_z.jpg" alt="鄱阳湖">　</p>
<blockquote>
<p>鄱阳湖</p>
</blockquote>
<hr>
<p><img src="https://c1.staticflickr.com/3/2896/14324449672_b06c231d6c_z.jpg" alt="白鹿洞书院"></p>
<blockquote>
<p>白鹿洞书院</p>
</blockquote>
<hr>
<p><img src="https://c2.staticflickr.com/6/5589/14322832681_233d754959_z.jpg" alt="庐山别墅"></p>
<blockquote>
<p>庐山别墅</p>
</blockquote>
<hr>
<p><img src="https://c1.staticflickr.com/3/2902/14346357953_3d54fed4da_z.jpg" alt="庐山别墅"></p>
<blockquote>
<p>庐山别墅</p>
</blockquote>
<hr>
<p><img src="https://c2.staticflickr.com/6/5579/14325547414_09eef72903_z.jpg" alt="丛林"></p>
<blockquote>
<p>丛林</p>
</blockquote>
<hr>
<p><img src="https://c1.staticflickr.com/3/2920/14139705167_ffe78333b9_z.jpg" alt="脚步"></p>
<blockquote>
<p> 脚步</p>
</blockquote>
<hr>
<p><img src="https://c2.staticflickr.com/6/5496/14139494749_e660855832_z.jpg" alt="此处输入图片的描述"></p>
<blockquote>
<p>庐山别墅</p>
</blockquote>
<hr>
<p><img src="https://c2.staticflickr.com/6/5487/14303019466_d580c37d38_z.jpg" alt="庐山瀑布-李白"></p>
<blockquote>
<p> 庐山瀑布-李白</p>
</blockquote>
<hr>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://38sr.com/2014/06/02/补上庐山游的照片/" data-id="cjbc9sv45005ayoqbthfeuh2x" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-mondrian+Oracle+Jpviot建立web工程" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2014/05/05/mondrian+Oracle+Jpviot建立web工程/">Mondrian+Oracle+Jpivot建立web工程</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2014/05/05/mondrian+Oracle+Jpviot建立web工程/">
            <time datetime="2014-05-05T12:12:32.000Z" itemprop="datePublished">2014-05-05</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/代码/">代码</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/jpivot/">jpivot</a>, <a class="tag-link" href="/tags/mondrian/">mondrian</a>, <a class="tag-link" href="/tags/oracle/">oracle</a>, <a class="tag-link" href="/tags/数据仓库/">数据仓库</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="开源工具"><a href="#开源工具" class="headerlink" title="开源工具"></a>开源工具</h2><h3 id="Mondrian"><a href="#Mondrian" class="headerlink" title="Mondrian"></a>Mondrian</h3><p>Mondrian is an OLAP (online analytical processing) engine written in Java. It reads from JDBC data sources, aggregates data in a memory cache, and implements the MDX language and the olap4j and XML/A APIs.<br>Mondrian是一个开源项目。一个用Java写成的OLAP（在线分析性处理）引擎。它用MDX语言实现查询，从关系数据库(RDBMS)[Oracle,Mysql,SQL Server…]中读取数据。然后经过Java API用多维的方式对结果进行展示。多维数据中，维度（dimension），层次（Hierarchies），级别(Level)等概念很重要。<br>OLAP用了多维分析的技术。尽管关系型数据库所存储的所有数据都是以行和列的形式存在的，但一个多维数据集还是可以由轴(axes)和单元(cell)组成。<br>联机分析处理(On Line Analytical Proccessing，简称OLAP) 概念最早由关系数据库之父E.F.Codd于1993年提出。OLAP应用是目前数据仓库上的重要应用之一，是决策分析的关键。作为数据仓库最重要的多维分析工具，OLAP利用存储在数据仓库中的数据完成各种分析操作，并以直观易懂的形式将分析结果返回给决策人员。它的目标是满足决策支持或多维环境特定的查询和报表需求，技术核心是多维分析。OLAP具有灵活的分析功能、直观的数据操作和分析结果可视化表示等突出优点，从而使用户对大量复杂数据的分析变得轻松而高效，以利于迅速做出正确的判断，辅助决策。</p>
<h3 id="Jpivot"><a href="#Jpivot" class="headerlink" title="Jpivot"></a>Jpivot</h3><p>从官网上<a href="http://jpivot.sourceforge.net/看到的介绍" target="_blank" rel="noopener">http://jpivot.sourceforge.net/看到的介绍</a><br>JPivot is a JSP custom tag library that renders an OLAP table and let users perform typical OLAP navigations like slice and dice, drill down and roll up. It uses Mondrian as its OLAP Server. JPivot also supports XMLA datasource access.<br><img src="/pic/mondrian/1.png" alt="Alt text" title="Optional title"></p>
<h2 id="工程搭建"><a href="#工程搭建" class="headerlink" title="工程搭建"></a>工程搭建</h2><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><p>在Oracle中建表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">create table tb_employee(</span><br><span class="line">      employee_id int ,</span><br><span class="line">      employee_name varchar(10)</span><br><span class="line">);</span><br><span class="line">create table tb_time(</span><br><span class="line">     time_id int,</span><br><span class="line">     the_year char(4),</span><br><span class="line">     the_month char(2)</span><br><span class="line">);</span><br><span class="line">create table tb_salary(</span><br><span class="line">     employee_id int,</span><br><span class="line">     time_id int,</span><br><span class="line">     salary int</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<h3 id="Schema的编写"><a href="#Schema的编写" class="headerlink" title="Schema的编写"></a>Schema的编写</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;Schema name=&quot;Mondrian&quot;&gt;</span><br><span class="line">	&lt;Cube name=&quot;CubeTest&quot;&gt;</span><br><span class="line">		&lt;Table name=&quot;TB_SALARY&quot; /&gt;</span><br><span class="line">		&lt;Dimension name=&quot;Employee&quot; foreignKey=&quot;EMPLOYEE_ID&quot;&gt;</span><br><span class="line">			&lt;Hierarchy hasAll=&quot;true&quot; primaryKey=&quot;EMPLOYEE_ID&quot;&gt;</span><br><span class="line">				&lt;Table name=&quot;TB_EMPLOYEE&quot; /&gt;</span><br><span class="line">				&lt;Level name=&quot;employeeId&quot; column=&quot;EMPLOYEE_ID&quot; uniqueMembers=&quot;true&quot;/&gt;</span><br><span class="line">				&lt;Level name=&quot;employeeName&quot; column=&quot;EMPLOYEE_NAME&quot; uniqueMembers=&quot;true&quot;/&gt;</span><br><span class="line">			&lt;/Hierarchy&gt;</span><br><span class="line">		&lt;/Dimension&gt;  </span><br><span class="line">		&lt;Dimension name=&quot;Time&quot; foreignKey=&quot;TIME_ID&quot;&gt;</span><br><span class="line">			&lt;Hierarchy hasAll=&quot;true&quot; primaryKey=&quot;TIME_ID&quot;&gt;</span><br><span class="line">				&lt;Table name=&quot;TB_TIME&quot; /&gt;</span><br><span class="line">				&lt;Level name=&quot;year&quot; column=&quot;THE_YEAR&quot; uniqueMembers=&quot;false&quot; /&gt;</span><br><span class="line">				&lt;Level name=&quot;month&quot; column=&quot;THE_MONTH&quot; uniqueMembers=&quot;false&quot; /&gt;</span><br><span class="line">				&lt;Level name=&quot;timeid&quot; column=&quot;TIME_ID&quot; uniqueMembers=&quot;false&quot; /&gt;</span><br><span class="line">			&lt;/Hierarchy&gt;</span><br><span class="line">		&lt;/Dimension&gt;</span><br><span class="line">		&lt;Measure name=&quot;Salary&quot; column=&quot;SALARY&quot; aggregator=&quot;max&quot; /&gt;</span><br><span class="line">		&lt;Measure name=&quot;TIMEID&quot; column=&quot;TIME_ID&quot; aggregator=&quot;sum&quot; /&gt;</span><br><span class="line">	&lt;/Cube&gt;</span><br><span class="line">&lt;/Schema&gt;</span><br></pre></td></tr></table></figure>
<h3 id="MDX"><a href="#MDX" class="headerlink" title="MDX"></a>MDX</h3><p>MDX（multi-dimensional expressions多维表达式）是一种语法，支持多维对象与数据定义和操作，语法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT [&lt;axis_specification&gt;</span><br><span class="line">       [, &lt;axis_specification&gt;...]]</span><br><span class="line">  FROM [&lt;cube_specification&gt;]</span><br><span class="line">[WHERE [&lt;slicer_specification&gt;]]</span><br></pre></td></tr></table></figure></p>
<p>本例所用到的mdx语句如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select &#123;[Employee].[employeeName].Members&#125; ON COLUMNS,</span><br><span class="line">   &#123;[Time].[timeid].Members&#125; ON ROWS</span><br><span class="line">from [CubeTest]</span><br></pre></td></tr></table></figure>
<h3 id="Mondrian源码"><a href="#Mondrian源码" class="headerlink" title="Mondrian源码"></a>Mondrian源码</h3><p>1）从 <a href="http://sourceforge.net/projects/mondrian/files/" target="_blank" rel="noopener">http://sourceforge.net/projects/mondrian/files/</a> 下载一个Mondrian自带的工程，选择一个较前的版本mondrian-3.0.0.10550，新版本貌似没有demo，<br>将下载的文件解压,然后进入lib,将mondrian.war解压,可以看到一个完整的java web 工程。   </p>
<p><img src="/pic/mondrian/2.png" alt="Alt text" title="Optional title"></p>
<p>2）在MyEclipse中新创建一个web项目，取名testapp，<br><img src="/pic/mondrian/3.png" alt="Alt text" title="Optional title"></p>
<p>注意，应选择J2EE1.4&amp;Add JSTL libraries to WEB-INFO/lib</p>
<p>3）将mondrian/lib/下的wcf、jpivot,lib复制到新工程的WEB-INF下面<br><img src="/pic/mondrian/4.png" alt="Alt text" title="Optional title"></p>
<p>Jpivot、wcf这两个文件夹包含jpivot和wcf用于生成用户界面的配置文件<em>.xml、</em>.xsl及标签文件*.tld的定义。Lib文件夹包含的是mondrian所要用的java包。<br>4） 将mondrian/目录下的jpivot、wcf、testpage.jsp等文件和文件夹复制到工程WebRoot下。<br><img src="/pic/mondrian/5.png" alt="Alt text" title="Optional title"></p>
<p>注：jpivot、wcf这两个文件夹包含mondrian使用的图像和css文件。Busy.jsp显示等 待页面、error.jsp显示出错页面、testpage.jsp这文件的用处将在后面介绍。<br>5）用下面内容替换掉工程中web.xml中的内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;</span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee </span><br><span class="line">	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;</span><br><span class="line">	&lt;display-name&gt;&lt;/display-name&gt;</span><br><span class="line">	&lt;welcome-file-list&gt;</span><br><span class="line">		&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;</span><br><span class="line">	&lt;/welcome-file-list&gt;</span><br><span class="line">	&lt;!-- jfreechart provided servlet --&gt;</span><br><span class="line">	&lt;servlet&gt;</span><br><span class="line">		&lt;servlet-name&gt;DisplayChart&lt;/servlet-name&gt;</span><br><span class="line">		&lt;servlet-class&gt;org.jfree.chart.servlet.DisplayChart&lt;/servlet-class&gt;</span><br><span class="line">	&lt;/servlet&gt;</span><br><span class="line">	&lt;servlet&gt;</span><br><span class="line">		&lt;description&gt;Default configuration created for servlet.&lt;/description&gt;</span><br><span class="line">		&lt;display-name&gt;GetChart&lt;/display-name&gt;</span><br><span class="line">		&lt;servlet-name&gt;GetChart&lt;/servlet-name&gt;</span><br><span class="line">		&lt;servlet-class&gt;com.tonbeller.jpivot.chart.GetChart&lt;/servlet-class&gt;</span><br><span class="line">	&lt;/servlet&gt;</span><br><span class="line">	&lt;servlet&gt;</span><br><span class="line">		&lt;description&gt;Default configuration created for servlet.&lt;/description&gt;</span><br><span class="line">		&lt;display-name&gt;Print&lt;/display-name&gt;</span><br><span class="line">		&lt;servlet-name&gt;Print&lt;/servlet-name&gt;</span><br><span class="line">		&lt;servlet-class&gt;com.tonbeller.jpivot.print.PrintServlet&lt;/servlet-class&gt;</span><br><span class="line">	&lt;/servlet&gt;</span><br><span class="line">	&lt;servlet&gt;</span><br><span class="line">		&lt;servlet-name&gt;MondrianXmlaServlet&lt;/servlet-name&gt;</span><br><span class="line">		&lt;servlet-class&gt;mondrian.xmla.impl.DefaultXmlaServlet&lt;/servlet-class&gt;</span><br><span class="line">	&lt;/servlet&gt;</span><br><span class="line">	&lt;servlet-mapping&gt;</span><br><span class="line">		&lt;servlet-name&gt;DisplayChart&lt;/servlet-name&gt;</span><br><span class="line">		&lt;url-pattern&gt;/DisplayChart&lt;/url-pattern&gt;</span><br><span class="line">	&lt;/servlet-mapping&gt;</span><br><span class="line">	&lt;servlet-mapping&gt;</span><br><span class="line">		&lt;servlet-name&gt;Print&lt;/servlet-name&gt;</span><br><span class="line">		&lt;url-pattern&gt;/Print&lt;/url-pattern&gt;</span><br><span class="line">	&lt;/servlet-mapping&gt;</span><br><span class="line">	&lt;servlet-mapping&gt;</span><br><span class="line">		&lt;servlet-name&gt;GetChart&lt;/servlet-name&gt;</span><br><span class="line">		&lt;url-pattern&gt;/GetChart&lt;/url-pattern&gt;</span><br><span class="line">	&lt;/servlet-mapping&gt;</span><br><span class="line">	&lt;servlet-mapping&gt;</span><br><span class="line">		&lt;servlet-name&gt;MondrianXmlaServlet&lt;/servlet-name&gt;</span><br><span class="line">		&lt;url-pattern&gt;/xmla&lt;/url-pattern&gt;</span><br><span class="line">	&lt;/servlet-mapping&gt;</span><br><span class="line">	&lt;filter&gt;</span><br><span class="line">		&lt;filter-name&gt;JPivotController&lt;/filter-name&gt;</span><br><span class="line">		&lt;filter-class&gt;com.tonbeller.wcf.controller.RequestFilter&lt;/filter-class&gt;</span><br><span class="line">		&lt;init-param&gt;</span><br><span class="line">			&lt;description&gt;forward to this page if session is new&lt;/description&gt;</span><br><span class="line">			&lt;param-name&gt;indexJSP&lt;/param-name&gt;</span><br><span class="line">			&lt;param-value&gt;/index.jsp&lt;/param-value&gt;</span><br><span class="line">		&lt;/init-param&gt; </span><br><span class="line">	&lt;/filter&gt;</span><br><span class="line">	&lt;filter-mapping&gt;</span><br><span class="line">		&lt;filter-name&gt;JPivotController&lt;/filter-name&gt;</span><br><span class="line">		&lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;</span><br><span class="line">	&lt;/filter-mapping&gt;</span><br><span class="line">	&lt;jsp-config&gt;</span><br><span class="line">		&lt;taglib&gt;</span><br><span class="line">			&lt;taglib-uri&gt;http://www.tonbeller.com/wcf&lt;/taglib-uri&gt;</span><br><span class="line">			&lt;taglib-location&gt;/WEB-INF/wcf/wcf-tags.tld&lt;/taglib-location&gt;</span><br><span class="line">		&lt;/taglib&gt;</span><br><span class="line"></span><br><span class="line">		&lt;taglib&gt;</span><br><span class="line">			&lt;taglib-uri&gt;http://www.tonbeller.com/jpivot&lt;/taglib-uri&gt;</span><br><span class="line">			&lt;taglib-location&gt;/WEB-INF/jpivot/jpivot-tags.tld&lt;/taglib-location&gt;</span><br><span class="line">		&lt;/taglib&gt;</span><br><span class="line">	&lt;/jsp-config&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure></p>
<p>Web.xml中定义了servelet映射，标签的定义，过滤器的定义。<br>6）定义schema,在WEB-INF新建mondriantest.xml文件将前面定义好的schema填入mondriantest.xml中<br>7）在WEB-INF下新建queries文件夹,并新建mondriantest.jsp文件,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page session=&quot;true&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot; %&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://www.tonbeller.com/jpivot&quot; prefix=&quot;jp&quot; %&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jstl/core&quot; %&gt;</span><br><span class="line">&lt;jp:mondrianQuery </span><br><span class="line">	id=&quot;query01&quot; </span><br><span class="line">	jdbcDriver=&quot;oracle.jdbc.driver.OracleDriver&quot; </span><br><span class="line">	jdbcUrl=&quot;jdbc:oracle:thin:@192.168.0.212:1521:gdcic&quot; </span><br><span class="line">	jdbcUser=&quot;gsms_client&quot; </span><br><span class="line">	jdbcPassword=&quot;123456&quot;   </span><br><span class="line">	catalogUri=&quot;/mondriantest.xml&quot;&gt; </span><br><span class="line">select &#123;[Employee].[employeeName].Members&#125; ON COLUMNS,</span><br><span class="line">   &#123;[Time].[timeid].Members&#125; ON ROWS</span><br><span class="line">from [CubeTest]</span><br><span class="line">&lt;/jp:mondrianQuery&gt;</span><br><span class="line">&lt;c:set var=&quot;title01&quot; scope=&quot;session&quot;&gt;Test Query uses Mondrian OLAP&lt;/c:set&gt;</span><br></pre></td></tr></table></figure></p>
<p>8）最后通过<a href="http://localhost:8001/webapp/testpage.jsp?query=mondriantest访问" target="_blank" rel="noopener">http://localhost:8001/webapp/testpage.jsp?query=mondriantest访问</a><br><img src="/pic/mondrian/6.png" alt="Alt text" title="Optional title"></p>
<h2 id="难点及注意事项"><a href="#难点及注意事项" class="headerlink" title="难点及注意事项"></a>难点及注意事项</h2><h3 id="缓存清除"><a href="#缓存清除" class="headerlink" title="缓存清除"></a>缓存清除</h3><p>关于mondrian清除缓存<br> mondrian为了保证展示数据的速度，默认的是将取出的数据通过Aggregate Manager缓存（这么做也符合数据仓库的特点）。但是实际的应用中，dimention中数据可能会变更，这时mondrian面对mdx查询仍取的事缓存的数据。<br>被这个mondrian缓存拖了好几天，首先新建一个clearcache.jsp的文件，其中清除缓存代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">String rep = &quot;&quot;;</span><br><span class="line">java.util.Iterator&lt;mondrian.rolap.RolapSchema&gt; schemaIterator =  mondrian.rolap.RolapSchema.getRolapSchemas();</span><br><span class="line">while(schemaIterator.hasNext())&#123;</span><br><span class="line">    mondrian.rolap.RolapSchema schema = schemaIterator.next();</span><br><span class="line">    rep+=&quot;Schema=&quot;+schema.getName()+&quot;&lt;br/&gt;&quot;;</span><br><span class="line">    mondrian.olap.CacheControl cacheControl = schema.getInternalConnection().getCacheControl(null);</span><br><span class="line">    for (mondrian.olap.Cube cube : schema.getCubes()) &#123;</span><br><span class="line">        rep+=&quot;   cube=&quot;+cube.getName()+&quot;&lt;br/&gt;&quot;;</span><br><span class="line">        cacheControl.flush(cacheControl.createMeasuresRegion(cube));</span><br><span class="line">    &#125;</span><br><span class="line">    cacheControl.flushSchema(schema);</span><br><span class="line">    cacheControl.flushSchemaCache();</span><br><span class="line">    session.invalidate();</span><br><span class="line">    //mondrian.rolap.CachePool.instance().flush();</span><br></pre></td></tr></table></figure></p>
<p>然后我去update数据库中的数据，<br>然后访问<a href="http://localhost:8083/testappt/clearcache.jsp，" target="_blank" rel="noopener">http://localhost:8083/testappt/clearcache.jsp，</a><br>访问完后在访问<br><a href="http://localhost:8083/testappt/testpage.jsp?query=mondriantest" target="_blank" rel="noopener">http://localhost:8083/testappt/testpage.jsp?query=mondriantest</a><br>你会发现第一次会跳转到<br><a href="http://localhost:8083/testappt/index.jsp页面去，" target="_blank" rel="noopener">http://localhost:8083/testappt/index.jsp页面去，</a><br>这说明缓存已经被清了，<br>然后继续访问<a href="http://localhost:8083/testappt/testpage.jsp?query=mondriantest" target="_blank" rel="noopener">http://localhost:8083/testappt/testpage.jsp?query=mondriantest</a><br>你会发现这些数据还是之前的旧数据。<br>然后无意中关闭PL/SQL Developer这个工具再去执行清除缓存页面和数据显示页面，发现数据已经是最新的了，<br>这就让我想到这个关闭的过程中数据才正式更新。<br>原来Oracle数据更新有个commit的操作。</p>
<h3 id="schema绑定配置"><a href="#schema绑定配置" class="headerlink" title="schema绑定配置"></a>schema绑定配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Connection connection = DriverManager.getConnection(&quot;Provider=mondrian;Jdbc=jdbc:oracle:thin:@192.168.0.212:1521:gdcic;</span><br><span class="line">JdbcUser=gsms_client;</span><br><span class="line">JdbcPassword=123456;</span><br><span class="line">Catalog=C:/Documents and Settings/Administrator/Workspaces/MyEclipse 10/webapp/WebRoot/mondriantest.xml;</span><br><span class="line">JdbcDrivers=oracle.jdbc.driver.OracleDriver;&quot;,null, false);</span><br></pre></td></tr></table></figure>
<p>如果是按照这种方式连接数据库并绑定schema,Catalog必须是绝对路径</p>
<h3 id="学习MDX"><a href="#学习MDX" class="headerlink" title="学习MDX"></a>学习MDX</h3><p>MDX（多维表达式）如同 SQL 查询一样，从一维到多维的查询还需要时间来使适应。</p>
<h3 id="oracle连接数据库驱动包"><a href="#oracle连接数据库驱动包" class="headerlink" title="oracle连接数据库驱动包"></a>oracle连接数据库驱动包</h3><p>记得下载ojbc14.jar(<a href="http://ishare.iask.sina.com.cn/f/15260846.html?from=like&amp;sudaref=www.baidu.com&amp;retcode=0),并添加到路径。" target="_blank" rel="noopener">http://ishare.iask.sina.com.cn/f/15260846.html?from=like&amp;sudaref=www.baidu.com&amp;retcode=0),并添加到路径。</a></p>
<h3 id="出现error"><a href="#出现error" class="headerlink" title="出现error"></a>出现error</h3><p>发现到最后的时候出现一个这样子的错误，attribute directive in tag file, attribute test does not accept any expressions，将testpage.jsp中的第一做下修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">原：&lt;%@ page session=&quot;true&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot; %&gt;</span><br><span class="line">修改后：&lt;%@ page session=&quot;true&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot; isELIgnored=&quot;true&quot; %&gt;</span><br></pre></td></tr></table></figure></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://38sr.com/2014/05/05/mondrian+Oracle+Jpviot建立web工程/" data-id="cjbc9suyv001syoqb6a8w7ujw" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-nodejs学习笔记(3) - 用socket.io实现简易聊天室" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2014/04/19/nodejs学习笔记(3) - 用socket.io实现简易聊天室/">nodejs学习笔记(3) - 用socket.io实现简易聊天室</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2014/04/19/nodejs学习笔记(3) - 用socket.io实现简易聊天室/">
            <time datetime="2014-04-19T07:12:32.000Z" itemprop="datePublished">2014-04-19</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/代码/">代码</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/express/">express</a>, <a class="tag-link" href="/tags/nodejs/">nodejs</a>, <a class="tag-link" href="/tags/socket-io/">socket.io</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>在一大侠的blog中看到他用socket.io做了一个网络聊天室，就照着大侠的方法自己也做了一个．Socket.io旨在在不同版本，不同终端的浏览器之间实现实时通信,为了实现在不同浏览器间实时通信，socket.io会从WebSocket,AjAX long polling,Forever iframe中选择一种最有的通信方法．支持IE5.5+,Safari 3+.Chrome 4+,firefox 3+,Opera 10+等桌面浏览器和Iphone Safari,iPad Safari,Android Webkit,WebOs webkit等手机浏览器．</p>
<h2 id="建立express工程和socket-io"><a href="#建立express工程和socket-io" class="headerlink" title="建立express工程和socket.io"></a>建立express工程和socket.io</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir socketio</span><br><span class="line">cd socketio</span><br><span class="line">express -e</span><br><span class="line">npm install socket.io</span><br></pre></td></tr></table></figure>
<h2 id="先运行下socket-io官网的代码"><a href="#先运行下socket-io官网的代码" class="headerlink" title="先运行下socket.io官网的代码"></a>先运行下socket.io官网的代码</h2><p>修改app.js,增加如下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">app.get(&apos;/&apos;, function(req,res)&#123;</span><br><span class="line">res.sendfile(__dirname+&apos;/client/index.html&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">var server=http.createServer(app);</span><br><span class="line">server.listen(80);</span><br><span class="line">var io = require(&apos;socket.io&apos;).listen(server);</span><br><span class="line"></span><br><span class="line">io.sockets.on(&apos;connection&apos;, function (socket) &#123;</span><br><span class="line">  socket.emit(&apos;news&apos;, &#123; hello: &apos;world&apos; &#125;);</span><br><span class="line">  socket.on(&apos;my other event&apos;, function (data) &#123;</span><br><span class="line">    console.log(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>建立一个client的文件夹，并在里面创建一个index.html的文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var socket = io.connect(&apos;http://localhost&apos;);</span><br><span class="line">  socket.on(&apos;news&apos;, function (data) &#123;</span><br><span class="line">    console.log(data);</span><br><span class="line">    socket.emit(&apos;my other event&apos;, &#123; my: &apos;data&apos; &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>在这个例子中只要客户端连接上，服务器端就会发送一个news事件的消息－＞客户端接收到news事件后–&gt;打印消息并发送一个my other event事件的消息－＞服务器端接收到这个my other event事件后就将其打印出来<br><img src="/pic/socket1.png" alt="Alt text" title="Optional title"></p>
<h2 id="socket-io相关"><a href="#socket-io相关" class="headerlink" title="socket.io相关"></a>socket.io相关</h2><p>1.socket.io 有connect，message，disconnect三个常用的基本事件，用户可以自定义自己的事件，我这个学习demo中就有isopen,system自定义的事件<br>2.socket.send方法默认是message事件发送消息<br>3.socket.emit(action, data, function)为发送事件的方法,可以发送一个空事件过去,socket.emit(‘isopen’);<br>4.socket.on(action,function)为接受事件的方法,也可以接受一个空事件,socket.on(‘isopen’,function(){});</p>
<h2 id="聊天室"><a href="#聊天室" class="headerlink" title="聊天室"></a>聊天室</h2><h3 id="服务器app-js"><a href="#服务器app-js" class="headerlink" title="服务器app.js"></a>服务器app.js</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">app.get(&apos;/socket&apos;,function(req,res)&#123;</span><br><span class="line">res.sendfile(__dirname+&apos;/client/index.html&apos;)</span><br><span class="line">&#125;);</span><br><span class="line">var server=require(&apos;http&apos;).createServer(app);</span><br><span class="line">server.listen(80);</span><br><span class="line">var io=require(&apos;socket.io&apos;).listen(server);</span><br><span class="line"></span><br><span class="line">io.sockets.on(&apos;connection&apos;,function(socket)&#123;</span><br><span class="line">var client=&#123;</span><br><span class="line">        name:false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送一个打开socket的消息信号</span><br><span class="line">socket.emit(&apos;isopen&apos;);</span><br><span class="line">socket.on(&apos;message&apos;,function(data)&#123;</span><br><span class="line">        if(!client.name)&#123;</span><br><span class="line">        var sysmsgobj = &#123;</span><br><span class="line">                time:getTime(),</span><br><span class="line">                name:data,</span><br><span class="line">                type:&apos;connect&apos;</span><br><span class="line">                &#125;;</span><br><span class="line">                client.name=data;</span><br><span class="line">                socket.emit(&apos;system&apos;,sysmsgobj);</span><br><span class="line">                socket.broadcast.emit(&apos;system&apos;,sysmsgobj);</span><br><span class="line">                console.log(&apos;login&apos;+sysmsgobj.name);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                var msgobj = &#123;time:getTime()&#125;;</span><br><span class="line">                msgobj[&apos;name&apos;]=client.name;</span><br><span class="line">                msgobj[&apos;content&apos;]=data;</span><br><span class="line">                msgobj[&apos;type&apos;]=&apos;message&apos;;</span><br><span class="line">                socket.emit(&apos;message&apos;,msgobj);</span><br><span class="line">                socket.broadcast.emit(&apos;message&apos;,msgobj);</span><br><span class="line">                console.log(&apos;new message&apos;,msgobj);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br><span class="line">socket.on(&apos;disconnect&apos;,function()&#123;</span><br><span class="line"> var sysmsgobj = &#123;</span><br><span class="line">                time:getTime(),</span><br><span class="line">                name:client.name,</span><br><span class="line">                type:&apos;disconnect&apos;</span><br><span class="line">                &#125;;</span><br><span class="line">                socket.emit(&apos;system&apos;,sysmsgobj);</span><br><span class="line">                socket.broadcast.emit(&apos;system&apos;,sysmsgobj);</span><br><span class="line">                console.log(sysmsgobj.name+&apos;is logout&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">var getTime=function()&#123;</span><br><span class="line">        var dt=new Date();</span><br><span class="line">        return dt.getHours()+&quot;:&quot;+dt.getMinutes()+&quot;:&quot;+dt.getSeconds();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="客户端chat-js"><a href="#客户端chat-js" class="headerlink" title="客户端chat.js"></a>客户端chat.js</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"> $(function () &#123;</span><br><span class="line">socket = io.connect(&apos;http://localhost&apos;);</span><br><span class="line">var msgbox=$(&apos;#msgbox&apos;);</span><br><span class="line">var input=$(&apos;#input&apos;);</span><br><span class="line">var name=$(&apos;#name&apos;);</span><br><span class="line">var issetname = false;</span><br><span class="line">socket.on(&apos;isopen&apos;,function()&#123;</span><br><span class="line">        name.text(&apos;please enter a name&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//接受系统消息</span><br><span class="line">socket.on(&apos;system&apos;,function(systemdata)&#123;</span><br><span class="line">if(systemdata.type == &apos;connect&apos;)&#123;</span><br><span class="line">        var p = &apos;&lt;p  style=&quot;color:#445566;line-height: 90%;margin:2px 0px 0px 0px&quot;&gt;&apos;+systemdata.time+&apos;-&apos;+systemdata.name+&apos; join us&apos;+&apos;&lt;/p&gt;&apos;;</span><br><span class="line">        if(issetname==systemdata.name)&#123;</span><br><span class="line">        name.text(issetname); </span><br><span class="line">        &#125;</span><br><span class="line">&#125;else if(systemdata.type == &apos;disconnect&apos;)&#123;</span><br><span class="line">        var p = &apos;&lt;p  style=&quot;color:#445566;line-height: 90%;margin:2px 0px 0px 0px&quot;&gt;&apos;+systemdata.time+&apos;-&apos;+systemdata.name+&apos; left&apos;+&apos;&lt;/p&gt;&apos;;</span><br><span class="line">&#125;</span><br><span class="line">msgbox.prepend(p);</span><br><span class="line">&#125;);</span><br><span class="line">socket.on(&apos;message&apos;, function (msgobj) &#123;</span><br><span class="line">        console.log(&apos;receive:&apos;+msgobj);</span><br><span class="line">        var p = &apos;&lt;p  style=&quot;color:#445566;line-height: 90%;margin:2px 0px 0px 0px&quot;&gt;&apos;+msgobj.time+&apos;-&apos;+msgobj.name+&apos;:&apos;+msgobj.content+&apos;&lt;/p&gt;&apos;;</span><br><span class="line">        msgbox.prepend(p);</span><br><span class="line">&#125;); </span><br><span class="line">//接受系统消息</span><br><span class="line">socket.on(&apos;system&apos;,function(systemdata)&#123;</span><br><span class="line">if(systemdata.type == &apos;connect&apos;)&#123;</span><br><span class="line">        var p = &apos;&lt;p  style=&quot;color:#445566;line-height: 90%;margin:2px 0px 0px 0px&quot;&gt;&apos;+systemdata.time+&apos;-&apos;+systemdata.name+&apos; join us&apos;+&apos;&lt;/p&gt;&apos;;</span><br><span class="line">        if(issetname==systemdata.name)&#123;</span><br><span class="line">        name.text(issetname); </span><br><span class="line">        &#125;</span><br><span class="line">&#125;else if(systemdata.type == &apos;disconnect&apos;)&#123;</span><br><span class="line">        var p = &apos;&lt;p  style=&quot;color:#445566;line-height: 90%;margin:2px 0px 0px 0px&quot;&gt;&apos;+systemdata.time+&apos;-&apos;+systemdata.name+&apos; left&apos;+&apos;&lt;/p&gt;&apos;;</span><br><span class="line">&#125;</span><br><span class="line">msgbox.prepend(p);</span><br><span class="line">&#125;);</span><br><span class="line">socket.on(&apos;message&apos;, function (msgobj) &#123;</span><br><span class="line">        console.log(&apos;receive:&apos;+msgobj);</span><br><span class="line">        var p = &apos;&lt;p  style=&quot;color:#445566;line-height: 90%;margin:2px 0px 0px 0px&quot;&gt;&apos;+msgobj.time+&apos;-&apos;+msgobj.name+&apos;:&apos;+msgobj.content+&apos;&lt;/p&gt;&apos;;</span><br><span class="line">        msgbox.prepend(p);</span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line">//通过“回车”提交聊天信息</span><br><span class="line">input.keydown(function(e) &#123;</span><br><span class="line">        if (e.keyCode === 13) &#123; </span><br><span class="line">            var msg = $(this).val();</span><br><span class="line">            socket.send(msg);</span><br><span class="line">            $(this).val(&apos;&apos;);</span><br><span class="line">            console.log(msg);</span><br><span class="line">            if(issetname === false)&#123;</span><br><span class="line">                issetname=msg;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="客户端显示index-html"><a href="#客户端显示index-html" class="headerlink" title="客户端显示index.html"></a>客户端显示index.html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;socket.io&lt;/title&gt;</span><br><span class="line">&lt;link rel=&apos;stylesheet&apos; href=&apos;/stylesheets/style.css&apos; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;javascripts/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;javascripts/chat.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;socket demo&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;socket demo&lt;/p&gt;</span><br><span class="line">&lt;span id=&quot;name&quot;&gt;&lt;/span&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; id=&quot;input&quot; /&gt;</span><br><span class="line">&lt;div id=&quot;msgbox&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="/pic/socket2.png" alt="Alt text" title="Optional title"></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>1.其中出现error raised: Error: listen EADDRINUSE，后来发现是端口的问题,开了多个node出现的</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://38sr.com/2014/04/19/nodejs学习笔记(3) - 用socket.io实现简易聊天室/" data-id="cjbc9suza0025yoqb4g2v7iao" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-粒子群算法(Particle_swarm_optimization)学习" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2014/04/13/粒子群算法(Particle_swarm_optimization)学习/">粒子群算法(Particle swarm optimization)学习</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2014/04/13/粒子群算法(Particle_swarm_optimization)学习/">
            <time datetime="2014-04-13T04:48:32.000Z" itemprop="datePublished">2014-04-13</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/算法/">算法</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/pso/">pso</a>, <a class="tag-link" href="/tags/优化/">优化</a>, <a class="tag-link" href="/tags/粒子群/">粒子群</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>从研一时就听到粒子群算法这一方法，但具体不知道这一算法可以做什么，适合哪些常所用。知道最近我在看一些定位的算法是时才想到如果把粒子群算法来优化数据可能会有个不错的效果，结果发现还真是这样子的，但提高的并不是很多，这个可能跟我的算法结构有关。</p>
<p>我认为，粒子群算法能否用来优化在于能不能找到一个比较好的适应值函数。毕竟这个适应值决定着例子的优化方向，如果没找到一个合适的适应值函数甚至会造成负影响</p>
<h2 id="粒子群算法介绍"><a href="#粒子群算法介绍" class="headerlink" title="粒子群算法介绍"></a>粒子群算法介绍</h2><p>粒子群优化(Particle Swarm Optimization, PSO)，又称微粒群算法，是由J. Kennedy和R. C. Eberhart等于1995年开发的一种演化计算技术，来源于对一个简化社会模型的模拟。其中“群(swarm)”来源于微粒群符合M. M. Millonas在开发应用于人工生命(artificial life)的模型时所提出的群体智能的5个基本原则。“粒子(particle)”是一个折衷的选择，因为既需要将群体中的成员描述为没有质量、没有体积的，同时也需要描述它的速度和加速状态。</p>
<h2 id="粒子群算法流程"><a href="#粒子群算法流程" class="headerlink" title="粒子群算法流程"></a>粒子群算法流程</h2><p>PSO算法是基于群体的，根据对环境的适应度将群体中的个体移动到好的区域。然而它不对个体使用演化算子，而是将每个个体看作是D维搜索空间中的一个没有体积的微粒（点），在搜索空间中以一定的速度飞行，这个速度根据它本身的飞行经验和同伴的飞行经验来动态调整。第i个微粒表示为Xi = (xi1, xi2, …, xiD)，它经历过的最好位置（有最好的适应值）记为Pi = (pi1, pi2, …, piD)，也称为pbest。在群体所有微粒经历过的最好位置的索引号用符号g表示，即Pg，也称为gbest。微粒i的速度用Vi = (vi1, vi2, …, viD)表示。对每一代，它的第d维(1 &lt;=i&lt;= D)根据如下方程进行变化：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vid = w∙vid+c1∙rand()∙(pid-xid)+c2∙Rand()∙(pgd-xid) (1a)</span><br><span class="line">xid = xid+vid</span><br></pre></td></tr></table></figure></p>
<p>其中w为惯性权重(inertia weight)，c1和c2为加速常数(acceleration constants)，rand()和Rand()为两个在[0,1]范围里变化的随机值。</p>
<p>上面的一系列叙述看起来很绕口，我对粒子群算法的理解就是：<br>1.算法是用来求最合适的一个值，这也是最优解，<br>2.在场景中有n个样本点适合其初始要求，现在每个样本点都以最大速度vmax在规定的区域内移动，<br>3.刚开始位置均为自己的最优解，每移动一步将其当前坐标去求适应值，如果这个比之前最好的Pi还好，则用这个值和坐标代替之前最好的值和坐标，同时所有的例子会有个全局最优解Gbest<br>4.每运动一步所有的例子均更新速度<br><img src="/pic/pso.jpg" alt="Alt text" title="Optional title"></p>
<h2 id="粒子群算法衍生算法"><a href="#粒子群算法衍生算法" class="headerlink" title="粒子群算法衍生算法"></a>粒子群算法衍生算法</h2><p>在基本粒子群算法的基础上不断出现了以下算法：</p>
<p>粒子群容易陷入局部最优，会出现早熟收敛的现象。</p>
<p>1.混沌粒子群优化算法(一种模拟来自大气混沌现象的改进)<br>2.无约束多目标粒子群<br>3.约束多目标粒子群<br>4.极坐标粒子群算法(PPSO)<br>5.带有活力因子的粒子群</p>
<h2 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h2><h3 id="pso-m控制算法代码"><a href="#pso-m控制算法代码" class="headerlink" title="pso.m控制算法代码"></a>pso.m控制算法代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line">clear</span><br><span class="line"></span><br><span class="line">% 参数初始化</span><br><span class="line">%粒子群算法中的两个参数</span><br><span class="line">c1 = 1.49445;</span><br><span class="line">c2 = 1.49445;</span><br><span class="line"></span><br><span class="line">maxgen=200;   % 进化次数  </span><br><span class="line">sizepop=20;   %种群规模</span><br><span class="line"></span><br><span class="line">Vmax=0.1;%速度限制</span><br><span class="line">Vmin=-1;</span><br><span class="line"></span><br><span class="line">popmax=2.048;%种群限制</span><br><span class="line">popmin=-2.048;</span><br><span class="line"></span><br><span class="line">% 产生初始粒子和速度</span><br><span class="line">for i=1:sizepop</span><br><span class="line">    %随机产生一个种群</span><br><span class="line">    pop(i,:)=popmax*rands(1,2);    %初始种群</span><br><span class="line">    V(i,:)=rands(1,2);  %初始化速度</span><br><span class="line">    %计算适应度</span><br><span class="line">    fitness(i)=fun(pop(i,:));   %染色体的适应度</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">%找最好的染色体</span><br><span class="line">[bestfitness bestindex]=min(fitness);</span><br><span class="line">gbest=pop(bestindex,:);   %全局最佳</span><br><span class="line">pbest=pop;    %个体最佳</span><br><span class="line">fitnessgbest=fitness;   %个体最佳适应度值</span><br><span class="line">fitnesszbest=bestfitness;   %全局最佳适应度值</span><br><span class="line">% 迭代寻优</span><br><span class="line">for i=1:maxgen    </span><br><span class="line">    for j=1:sizepop        </span><br><span class="line">        %速度更新</span><br><span class="line">        V(j,:) = V(j,:) + c1*rand*(pbest(j,:) - pop(j,:)) + c2*rand*(gbest - pop(j,:));</span><br><span class="line">        V(j,find(V(j,:)&gt;Vmax))=Vmax;</span><br><span class="line">        V(j,find(V(j,:)&lt;Vmin))=Vmin;</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">        %种群更新</span><br><span class="line">        pop(j,:)=pop(j,:)+0.5*V(j,:);</span><br><span class="line">        pop(j,find(pop(j,:)&gt;popmax))=popmax;</span><br><span class="line">        pop(j,find(pop(j,:)&lt;popmin))=popmin;</span><br><span class="line">        %自适应变异（避免粒子群算法陷入局部最优）</span><br><span class="line">        if rand&gt;0.8</span><br><span class="line">            k=ceil(2*rand);%ceil朝正无穷大方向取整</span><br><span class="line">            pop(j,k)=rand;</span><br><span class="line">        end </span><br><span class="line">        %适应度值</span><br><span class="line">        fitness(j)=fun(pop(j,:));</span><br><span class="line">        %个体最优更新</span><br><span class="line">        if fitness(j) &lt; fitnessgbest(j)</span><br><span class="line">            pbest(j,:) = pop(j,:);</span><br><span class="line">            fitnessgbest(j) = fitness(j);</span><br><span class="line">        end        </span><br><span class="line">        %群体最优更新</span><br><span class="line">        if fitness(j) &lt; fitnesszbest</span><br><span class="line">            gbest = pop(j,:);</span><br><span class="line">            fitnesszbest = fitness(j);</span><br><span class="line">       end   </span><br><span class="line">    end</span><br><span class="line">    yy(i)=fitnesszbest;          </span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">% 仿真实验</span><br><span class="line">figure</span><br><span class="line">plot(yy)</span><br><span class="line">title(&apos;适应度曲线&apos;);</span><br><span class="line">xlabel(&apos;迭代次数&apos;);ylabel(&apos;适应度PBEST&apos;);</span><br></pre></td></tr></table></figure>
<h3 id="fun-m测试函数代码"><a href="#fun-m测试函数代码" class="headerlink" title="fun.m测试函数代码"></a>fun.m测试函数代码</h3><p>测试函数属于非凸，病态函数,在x1=x2=0时达到极小值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function y = fun(x)</span><br><span class="line">    %测试Rosenbrock函数  -2.048&lt;x1,x2&lt;2.048</span><br><span class="line">    x1=x(1);</span><br><span class="line">    x2=x(2);</span><br><span class="line">    y=100*(x1^2-x2)^2+(1-x1)^2; </span><br><span class="line">end</span><br></pre></td></tr></table></figure></p>
<h3 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a>实验结果</h3><p><img src="/pic/result.jpg" alt="Alt text" title="Optional title"></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://38sr.com/2014/04/13/粒子群算法(Particle_swarm_optimization)学习/" data-id="cjbc9sv3g0053yoqb2z9x1jmb" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-nodejs学习笔记(2) - express-mongoose-ejs增删改查" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2014/04/04/nodejs学习笔记(2) - express-mongoose-ejs增删改查/">nodejs学习笔记(2) - express-mongoose-ejs增删改查</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2014/04/04/nodejs学习笔记(2) - express-mongoose-ejs增删改查/">
            <time datetime="2014-04-04T11:21:32.000Z" itemprop="datePublished">2014-04-04</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/代码/">代码</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/ejs/">ejs</a>, <a class="tag-link" href="/tags/express/">express</a>, <a class="tag-link" href="/tags/mongoose/">mongoose</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>今天心情不错，上午九点就去广州市图书馆还书，顺便呆到下午五点才回来，广图真心是个适合学习的地方，环境一流，设施一流，免费WIFI，热水提供．你只需要一个面包就可以在那呆到长达八个小时．在那里画了画不喜欢的论文idea，看看matlab写的仿真代码(这些确实不太喜欢)，最后还是进入linux环境．</p>
<h2 id="ejs是什么"><a href="#ejs是什么" class="headerlink" title="ejs是什么"></a>ejs是什么</h2><p>上一篇笔记中，所创建的express，是支持ejs模板引擎的，模板引擎很多,jade,ejs,Handlebars前两个用的多一点．</p>
<ol>
<li>ejs模板代码风格<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt;</span><br><span class="line">&lt;% for(var i=0 ; i&lt;entry.length;i++)&#123; %&gt;</span><br><span class="line">&lt;p&gt;&lt;%= entry[i] %&gt;&lt;/p&gt;</span><br><span class="line"> &lt;% &#125; %&gt;&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
<li>jade代码风格<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">!!!</span><br><span class="line">html</span><br><span class="line">    head</span><br><span class="line"> 	title #&#123;title&#125;</span><br><span class="line">    body</span><br><span class="line">	h1 ##&#123;title&#125;</span><br><span class="line">    -each e in entrys	</span><br><span class="line">     p= e</span><br></pre></td></tr></table></figure>
两种模板引擎各有忧率优劣，ejs性能比jade快,jade代码比较简洁，作为初学者也不知道从哪个开始比较好，jade代码虽然比较简洁，但是作为一个写惯了php代码的比较适应ejs的代码风格.<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2>为了方便管理，将所有的路由函数放到./routes/userdb.js里面去了<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var userdb = require(&apos;./routes/userdb&apos;);</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">app.get(&apos;/add&apos;, userdb.add);</span><br><span class="line">app.get(&apos;/show&apos;, userdb.show);</span><br><span class="line">app.get(&apos;/showbyname&apos;,userdb.showbyname);</span><br><span class="line">app.get(&apos;/removebyname&apos;,userdb.removebyname);</span><br><span class="line">app.get(&apos;/updatebyname&apos;,userdb.updatebyname);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="增加数据"><a href="#增加数据" class="headerlink" title="增加数据"></a>增加数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//add data like this</span><br><span class="line">exports.add=function(req,res)&#123;</span><br><span class="line">var user = new User(&#123;</span><br><span class="line">    name:&apos;forest&apos;,</span><br><span class="line">    password:&apos;123456&apos;</span><br><span class="line">&#125;);</span><br><span class="line">user.save(function (err, user) &#123;</span><br><span class="line">        if(!err) &#123;</span><br><span class="line">            console.log(user);</span><br><span class="line">            res.redirect(&apos;/show&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">console.log(user);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>当执行完<a href="http://localhost:3000/add" target="_blank" rel="noopener">localhost:3000/add</a>后数据库中多了一条数据<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.users.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;533e58efad72fc988a674051&quot;), &quot;name&quot; : &quot;caosll&quot;, &quot;password&quot; : &quot;zhesaaa&quot; &#125;</span><br><span class="line">&#123; &quot;name&quot; : &quot;forest&quot;, &quot;password&quot; : &quot;123456&quot;, &quot;_id&quot; : ObjectId(&quot;533ec59216093e1116e4412b&quot;), &quot;__v&quot; : 0 &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//delete data by name</span><br><span class="line">exports.removebyname=function(req,res)&#123;</span><br><span class="line">User.removebyname(&apos;forest&apos;,function(error)&#123;</span><br><span class="line">if(error)&#123;</span><br><span class="line">        res.render(&apos;removebyname&apos;,&#123;title:&apos;welcome to removebyname page&apos;,tips:&quot;remove unsuccessfully&quot;&#125;);</span><br><span class="line">&#125;else&#123;</span><br><span class="line"></span><br><span class="line">        res.render(&apos;removebyname&apos;,&#123;title:&apos;welcome to removebyname page&apos;,tips:&apos;removee successfully&apos;&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>当执行完<a href="http://localhost:3000/removebyname" target="_blank" rel="noopener">localhost:3000/removebyname</a>后数据库<code>name=’forest’</code>的数据被删除<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.users.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;533e58efad72fc988a674051&quot;), &quot;name&quot; : &quot;caosll&quot;, &quot;password&quot; : &quot;zhesaaa&quot; &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//update data</span><br><span class="line">exports.updatebyname=function(req,res)&#123;</span><br><span class="line">var update     = &#123;$set : &#123;password : &apos;273333&apos;&#125;&#125;;</span><br><span class="line">var options    = &#123;upsert : true&#125;;</span><br><span class="line"></span><br><span class="line">User.updatebyname(&apos;forest&apos;,update,options,function(error)&#123;</span><br><span class="line">if(error)&#123;</span><br><span class="line">        res.render(&apos;updatebyname&apos;,&#123;title:&apos;welcome to removebyname page&apos;,tips:&quot;update unsuccessfully&quot;&#125;);</span><br><span class="line">&#125;else&#123;</span><br><span class="line"></span><br><span class="line">        res.render(&apos;updatebyname&apos;,&#123;title:&apos;welcome to removebyname page&apos;,tips:&apos;update successfully&apos;&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>当执行完<a href="http://localhost:3000/updatebyname" target="_blank" rel="noopener">localhost:3000/updatebyname</a>后数据库中<code>name=’forest’</code>的password被更新了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.users.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;533e58efad72fc988a674051&quot;), &quot;name&quot; : &quot;caosll&quot;, &quot;password&quot; : &quot;zhesaaa&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;533ec74e9630dc38c66d5aff&quot;), &quot;name&quot; : &quot;forest&quot;, &quot;password&quot; : &quot;273333&quot; &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="demo代码"><a href="#demo代码" class="headerlink" title="demo代码"></a>demo代码</h2><p><a href="https://github.com/ForestCho/express-mongoose-demo2" target="_blank" rel="noopener">https://github.com/ForestCho/express-mongoose-demo2</a></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://38sr.com/2014/04/04/nodejs学习笔记(2) - express-mongoose-ejs增删改查/" data-id="cjbc9suz70021yoqb0evtyox5" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-nodejs学习笔记(1) - express如何使用" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2014/04/03/nodejs学习笔记(1) - express如何使用/">nodejs学习笔记(1) - express如何使用</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2014/04/03/nodejs学习笔记(1) - express如何使用/">
            <time datetime="2014-04-03T07:12:32.000Z" itemprop="datePublished">2014-04-03</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/代码/">代码</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/express/">express</a>, <a class="tag-link" href="/tags/mongoose/">mongoose</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>最近在学习一些nodejs生态圈的技术，这方面的白痴要慢慢入门需要很多东西要学，nodejs本身，ejs模板引擎,express轻型web应用框架，hexo有nodejs驱动的，快速搭建博客的框架。bootstrap前段开发工具包，快速开发前段用的。总之都是些开源项目，对半年后的找工作应该多少有些帮助。</p>
<h2 id="安装express"><a href="#安装express" class="headerlink" title="安装express"></a>安装express</h2><ol>
<li>创建工程目录并进入<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir project</span><br><span class="line">cd project</span><br></pre></td></tr></table></figure></li>
<li>安装express&amp;&amp;查看版本3.5.1<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g express</span><br><span class="line">express -V</span><br></pre></td></tr></table></figure></li>
<li>在工程目录下创建express程序&amp;&amp;启动<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">express -e test-demo</span><br><span class="line">cd test-demo</span><br><span class="line">npm install</span><br><span class="line">node app.js</span><br></pre></td></tr></table></figure>
 express -e 参数e表示支持ejs模板<br> 执行完后就出现<br> Express server listening on port 3000<br> 可以通过<a href="http://localhost:3000" target="_blank" rel="noopener">localhost:3000</a>访问</li>
<li>装些额外的东西<br>如果出现<code>Error: Cannot find module ‘ejs’</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install ejs -g</span><br></pre></td></tr></table></figure>
 还可以装一个叫supervisor的工具，帮助我们不用每次修改都要重启，实现一个自动重启的功能,<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install supervisor -g</span><br><span class="line">supervisor app.js</span><br></pre></td></tr></table></figure>
 最后可以装mongoose,一个对mongodb进行建模的工具，<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mongooses</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="创建Schema"><a href="#创建Schema" class="headerlink" title="创建Schema"></a>创建Schema</h2><p>首先创建文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir models</span><br><span class="line">cd models</span><br><span class="line">vim user.js</span><br></pre></td></tr></table></figure><br>在文件中输入如下代码,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&apos;mongoose&apos;)</span><br><span class="line">    , Schema = mongoose.Schema</span><br><span class="line">    , ObjectId = Schema.ObjectId;</span><br><span class="line"></span><br><span class="line">var UserSchema = new Schema(&#123;</span><br><span class="line">      name: String</span><br><span class="line">    , password: String</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">module.exports = mongoose.model(&apos;User&apos;, UserSchema);</span><br></pre></td></tr></table></figure><br>首先引入mongoose的建模工具，这个工具之前已经创建了，<br>最后将其放modules.exports,</p>
<h2 id="修改route-index-js"><a href="#修改route-index-js" class="headerlink" title="修改route/index.js"></a>修改route/index.js</h2><p>在index.js直接添加如下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var User = require(&apos;../models/user&apos;);</span><br><span class="line">exports.add=function(req,res)&#123;</span><br><span class="line">var user = new User(&#123;</span><br><span class="line">    name:&apos;forest&apos;,</span><br><span class="line">    password:&apos;123456&apos;</span><br><span class="line">&#125;);</span><br><span class="line">user.save(function (err, user) &#123;</span><br><span class="line">        if(!err) &#123;</span><br><span class="line">            console.log(user);</span><br><span class="line">            res.redirect(&apos;/&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">console.log(user);</span><br><span class="line">&#125;;</span><br><span class="line">exports.show=function(req,res)&#123;</span><br><span class="line">User.find(function(err,doc)&#123;</span><br><span class="line">res.json(doc)&#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br>向其中插入一条{name:”forest”,password:”123456”}和输出所有的条目</p>
<h2 id="修改app-js"><a href="#修改app-js" class="headerlink" title="修改app.js"></a>修改app.js</h2><p>配置mongodb的连接代码并修改app.js中的路由配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&apos;mongoose&apos;);</span><br><span class="line">//mongoose</span><br><span class="line">mongoose.connect(&apos;mongodb://localhost/test-demo&apos;);</span><br><span class="line"></span><br><span class="line">app.get(&apos;/add&apos;, routes.add);</span><br><span class="line">app.get(&apos;/show&apos;, routes.show);</span><br></pre></td></tr></table></figure></p>
<p>这样就创建了两个地址的访问，</p>
<ol>
<li>一个<code>localhost:3000/add</code>向数据库中插入数据，</li>
<li>另外一个是<code>localhost:3000/show</code>显示数据库中的数据.</li>
</ol>
<h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><ol>
<li>当你访问<a href="http://localhost:3000/add" target="_blank" rel="noopener">localhost:3000/add</a>时会想里面插入一条<br>{name:”forest”,password:”123456”}的数据,并跳往首页<br>执行如下命令可看到数据库中多了一条数据<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu:/home/caosl/project/test-demo/models# mongo</span><br><span class="line">MongoDB shell version: 2.0.4</span><br><span class="line">connecting to: test</span><br><span class="line">&gt; use test-demo</span><br><span class="line">switched to db test-demo</span><br><span class="line">&gt; db.users.find()</span><br><span class="line">&#123; &quot;name&quot; : &quot;forest&quot;, &quot;password&quot; : &quot;123456&quot;, &quot;_id&quot; : ObjectId(&quot;533cfd281bb83b4b12aab81d&quot;), &quot;__v&quot; : 0 &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>当你访问<a href="http://localhost:3000/show" target="_blank" rel="noopener">localhost:3000/show</a>后节目会显示<br><img src="/pic/express-mongoose.png" alt="Alt text" title="Optional title"></p>
</li>
<li><p>express-mongoose-demo地址<br><a href="https://github.com/ForestCho/express-mongoose-demo" target="_blank" rel="noopener">https://github.com/ForestCho/express-mongoose-demo</a></p>
</li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://38sr.com/2014/04/03/nodejs学习笔记(1) - express如何使用/" data-id="cjbc9suz0001uyoqb0aqtnvfz" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-抛弃wordpress正式用hexo-迁徙之路" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2014/03/25/抛弃wordpress正式用hexo-迁徙之路/">抛弃Wordpress正式用Hexo-迁徙之路</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2014/03/25/抛弃wordpress正式用hexo-迁徙之路/">
            <time datetime="2014-03-25T14:12:32.000Z" itemprop="datePublished">2014-03-25</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/代码/">代码</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/bootstrap/">bootstrap</a>, <a class="tag-link" href="/tags/github/">github</a>, <a class="tag-link" href="/tags/hexo/">hexo</a>, <a class="tag-link" href="/tags/wordpress/">wordpress</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>已经连着折腾三天了，也不差一晚上，今晚终于把所主题改成自己满意的，并把有的博文从Wordpress上迁徙至此，过程中也遇到一些问题，比如编码问题、字符问题。最后只能想办法解决。</p>
<h2 id="整个过程"><a href="#整个过程" class="headerlink" title="整个过程"></a>整个过程</h2><ol>
<li>安装hexo-migrator-wordpress <code>npm install hexo-migrator-wordpress</code></li>
<li>在wordpress的后台：工具-&gt;导出-&gt;文章-&gt;wordpress.2014-03-25.xml</li>
<li>运行<code>hexo migrate wordpress /path</code>,如果xml文件放在根目录下则输入<code>hexo migrate wordpress /wordpress.2014-03-25</code></li>
</ol>
<hr>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="问题1：xml文件头部包含BOM"><a href="#问题1：xml文件头部包含BOM" class="headerlink" title="问题1：xml文件头部包含BOM"></a>问题1：xml文件头部包含BOM</h3><p>安装的过程中出现<code>Error: Non-whitespace before first tag.</code>的问题，<br>这是你需要<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set encoding=utf-8</span><br><span class="line">set nobomb </span><br></pre></td></tr></table></figure></p>
<h3 id="问题2：一些特殊字符的处理"><a href="#问题2：一些特殊字符的处理" class="headerlink" title="问题2：一些特殊字符的处理"></a>问题2：一些特殊字符的处理</h3><p>由于之前在wordpress中的一个代码插件会出现很多<code>[php][/php],[java][/java]…</code>之类，和一些html码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;quot,&amp;gt,&amp;lt,&amp;nbsp,&lt;pre&gt; </span><br></pre></td></tr></table></figure><br>这会导致在Hexo代码显得很乱，然后想了个办法就是写个shell脚本，将这些特殊字符用新的字符代替。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">cd /hom=`ls`</span><br><span class="line"></span><br><span class="line">for filename in $files</span><br><span class="line">do</span><br><span class="line">#替换所有的java</span><br><span class="line">sed -i &apos;s/\[java\]/&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/g&amp;apos; $filename&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;apos;s/\[\/java\]/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;/g’ $filename&lt;/p&gt;</span><br><span class="line">&lt;p&gt;#替换所有的php&lt;br&gt;sed -i ‘s/[php]/&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/g&amp;apos; $filename&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;apos;s/\[\/php\]/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;/g’ $filename&lt;/p&gt;</span><br><span class="line">&lt;p&gt;#替换所有的html&lt;br&gt;sed -i ‘s/[html]/&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/g&amp;apos; $filename&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;apos;s/\[\/html\]/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;/g’ $filename&lt;/p&gt;</span><br><span class="line">&lt;p&gt;#替换所有的matlab&lt;br&gt;sed -i ‘s/[matlab]/&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/g&amp;apos; $filename&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;apos;s/\[\/matlab\]/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;/g’ $filename&lt;/p&gt;</span><br><span class="line">&lt;p&gt;#替换所有的javascript&lt;br&gt;sed -i ‘s/[javascript]/&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/g&amp;apos; $filename&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;apos;s/\[\/javascript\]/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;/g’ $filename&lt;/p&gt;</span><br><span class="line">&lt;p&gt;#替换所有的处理一些特殊字符&lt;br&gt;sed -i ‘s/&amp;quot;/“/g’ $filename&lt;br&gt;sed -i ‘s/&amp;lt;/&lt;/g&apos; $filename</span><br><span class="line">sed -i &apos;s/&amp;gt;/&gt;/g’ $filename&lt;br&gt;sed -i ‘s/&amp;nbsp;/ /g’ $filename&lt;br&gt;sed -i ‘s/&lt;pre&gt;/ /g’ $filename&lt;br&gt;done&lt;br&gt;</span><br></pre></td></tr></table></figure><br>shell第一次写，很乱，凑合看，哈哈。</p>
<h2 id="主题的修改"><a href="#主题的修改" class="headerlink" title="主题的修改"></a>主题的修改</h2><p>主题用<code>bootstrap</code>添加了一些新的特效，例如<code>Category</code>下拉时可以看到所有的分类，当网页往下滚动时header会保持不变且会出现透明。</p>
<h3 id="Category下拉菜单"><a href="#Category下拉菜单" class="headerlink" title="Category下拉菜单"></a>Category下拉菜单</h3><p>改动/layout/_partial/header.ejs中的代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">	&lt;% if ( i == &quot;Category&quot;)&#123; %&gt;</span><br><span class="line">                &lt;li class=&quot;dropdown&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot;&gt;&lt;%= i %&gt;&lt;b class=&quot;caret&quot;&gt;&lt;/b&gt;&lt;/a&gt;</span><br><span class="line">	&lt;% &#125;else&#123; %&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;&lt;%- theme.menu[i] %&gt;&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot;&gt;&lt;%= i %&gt;&lt;/a&gt;</span><br><span class="line">	&lt;% &#125; %&gt;</span><br><span class="line">	&lt;% if ( i == &quot;Category&quot;)&#123; %&gt;</span><br><span class="line">	&lt;ul class=&quot;dropdown-menu&quot;&gt;</span><br><span class="line">               &lt;% site.categories.sort(&apos;name&apos;).each(function(item)&#123; %&gt;</span><br><span class="line">			&lt;li&gt;&lt;a data-src=&quot;&lt;%- config.root %&gt;&lt;%- item.path %&gt;&quot; href=&quot;#&lt;%= item.name %&gt;&quot; title=&quot;&lt;%= item.name %&gt;&quot;&gt;&lt;%= item.name %&gt;</span><br><span class="line">			&lt;sup&gt;&lt;%= item.posts.length %&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">	&lt;% &#125;);&#125;&lt;/ul&gt; %&gt;</span><br><span class="line">        </span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="顶部固定导航栏"><a href="#顶部固定导航栏" class="headerlink" title="顶部固定导航栏"></a>顶部固定导航栏</h3><p>也是改动/layout/_partial/header.ejs中的代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;navbar-wrap&quot; class=&quot;navbar-fixed-top&quot; style=&quot;opacity: 1&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="友情链接的修改"><a href="#友情链接的修改" class="headerlink" title="友情链接的修改"></a>友情链接的修改</h3><p>改动/layout/_widget/links.ejs中的代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;linkslist&quot;&gt;</span><br><span class="line">  &lt;p class=&quot;asidetitle&quot;&gt;&lt;%= __(&apos;links&apos;) %&gt;&lt;/p&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;http://51bigfool.com&quot; target=&quot;_blank&quot; title=&quot;大憨--室友&quot;&gt;大憨</span><br><span class="line">的责任田&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;http://www.liangzhaojun.com&quot; target=&quot;_blank&quot; title=&quot;书记--室&gt;友&quot;&gt;梁书记&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;http://www.github.com/ForestCho&quot; target=&quot;_blank&quot; title=&quot;学玩Github&quot;&gt;我的GitHub&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;http://www.coolshell.cn&quot; target=&quot;_blank&quot; title=&quot;学习宝地&quot;&gt;CoolShell&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="主题地址"><a href="#主题地址" class="headerlink" title="主题地址"></a>主题地址</h3><p>赶了个大早上传到Github上面去了，具体还在完善<br><code>git clone <a href="https://github.com/ForestCho/pacman-fit-me.git" target="_blank" rel="noopener">https://github.com/ForestCho/pacman-fit-me.git</a></code></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://38sr.com/2014/03/25/抛弃wordpress正式用hexo-迁徙之路/" data-id="cjbc9sv1w0045yoqbabhisxcb" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-使用hexo工具在github上搭建个人博客系统" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2014/03/24/使用hexo工具在github上搭建个人博客系统/">使用Hexo工具在Github上搭建个人博客系统</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2014/03/24/使用hexo工具在github上搭建个人博客系统/">
            <time datetime="2014-03-24T01:20:50.000Z" itemprop="datePublished">2014-03-24</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/代码/">代码</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/hexo/">hexo</a>, <a class="tag-link" href="/tags/linux/">linux</a>, <a class="tag-link" href="/tags/markdown/">markdown</a>, <a class="tag-link" href="/tags/博客/">博客</a>, <a class="tag-link" href="/tags/域名/">域名</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前奏不宜太长"><a href="#前奏不宜太长" class="headerlink" title="前奏不宜太长"></a>前奏不宜太长</h2><p>最近一两个星期发现自己已经深深的坠入linux的爱河中，一直在不断的学习linux，自己这台破机装的是linux和windows的双系统，现在只要开机都会自动选择进入linux系统。现在想想windows真没有我值得留恋的地方，不玩游戏只浏览网页和看电影在linux下面足够了，再者配置低的机子在windows下面跑的很慢。<br></p>

<p>前天在弄nodejs，昨天又看到一个叫hexo的好玩的东西，hexo可以理解为一种静态网页生成器，静态网页在浏览时速度会明显加快，其次爬虫比较钟意静态网页。当然hexo搭建的博客系统也可以自定义主题。<br></p>

<p>想在hexo博客下面写下第一篇，以记录博客的搭建过程和熟悉Markdown这种书写方式。<br></p>

<hr>
<h2 id="Hexo要求环境"><a href="#Hexo要求环境" class="headerlink" title="Hexo要求环境"></a>Hexo要求环境</h2><ul>
<li>Git </li>
<li>NodeJs</li>
<li>Github帐号(可以用其他，很多人已经在bae和gitCafe上面搭建了)</li>
</ul>
<hr>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo </span><br></pre></td></tr></table></figure>
<p>NPM全程Node Package Manager,是NodeJs的包管理器</p>
<hr>
<h2 id="初始化Hexo"><a href="#初始化Hexo" class="headerlink" title="初始化Hexo"></a>初始化Hexo</h2><p>建立一个blog的文件夹<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir blog</span><br><span class="line">cd blog</span><br></pre></td></tr></table></figure><br>然后<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="生成-amp-预览"><a href="#生成-amp-预览" class="headerlink" title="生成&amp;预览"></a>生成&amp;预览</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<p>也可以用以下简写命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><br>这时用浏览器打开<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> 预览博客</p>
<hr>
<h2 id="修改发布方式"><a href="#修改发布方式" class="headerlink" title="修改发布方式"></a>修改发布方式</h2><p>当你需要发布到Github上面去，需要在_config.yml中添加一下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: github</span><br><span class="line">  repository: https://github.com/ForestCho/cslblog.github.com.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></p>
<h2 id="发布到GitHub"><a href="#发布到GitHub" class="headerlink" title="发布到GitHub"></a>发布到GitHub</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
<p>也可以用简写命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><br>输入命令后一次输入你的GitHub帐号和密码即可</p>
<hr>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="信息修改"><a href="#信息修改" class="headerlink" title="信息修改"></a>信息修改</h3><p>可以在_config.yml中修改这些选项设置博客的基本信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># Site</span><br><span class="line">title: Forest&apos;s Blog</span><br><span class="line">subtitle:</span><br><span class="line">description: Forest&apos;s Blog</span><br><span class="line">author: Forest</span><br><span class="line">email: caosl158@gmail.com</span><br><span class="line">language: ch</span><br><span class="line"></span><br><span class="line">## URL</span><br><span class="line">## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;</span><br><span class="line">url: http://wiki.yidongzhifu.net</span><br><span class="line">root: /</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads/code</span><br></pre></td></tr></table></figure></p>
<h3 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h3><p>直接初始化时的主题为<code>landscape</code>，<a href="https://github.com/tommy351/hexo/wiki/Themes" target="_blank" rel="noopener">https://github.com/tommy351/hexo/wiki/Themes</a>这里聚集了不少主题,<br>如果想要安装一个pacman的主题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/A-limon/pacman.git themes/pacman</span><br></pre></td></tr></table></figure><br>然后将_config.yml中的theme修改为:pacman<br>接着在进行生成预览操作就可以,如果发现没效果，可以<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf public</span><br><span class="line">hexo clean</span><br></pre></td></tr></table></figure></p>
<h3 id="域名绑定"><a href="#域名绑定" class="headerlink" title="域名绑定"></a>域名绑定</h3><p>如果需要绑定域名</p>
<ol>
<li>需要先讲域名解析到<code>forestcho.github.io</code>,或者<code>103.245.222.133</code>(通过ping forestcho.github.io 获得的)<br><img src="/pic/binddomain.png" alt="Alt text" title="Optional title"></li>
<li>在sourse下面新建一个内容为需要解析的域名的CNAME(无后缀)文件,<br>例如我的就是wiki.yidongzhifu.net<br>这个过程结束后大概需要十多分钟才能生效，听两首歌曲放松下。</li>
</ol>
<h3 id="特别提醒"><a href="#特别提醒" class="headerlink" title="特别提醒"></a>特别提醒</h3><ol>
<li>当你在github上建立一个repositories的时候,应该命名为<code>gitusername.github.com</code></li>
<li>更换主题的时候，在_config.yml里设置主题的名字是有大小写之分的,例如pacmanblue&gt;和pacmanBlue是不一样的</li>
<li>当你对所用主题做了修改时，应进行如下操作以便能看到你想要的结果<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf public</span><br><span class="line">hexo clean</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h2 id="涉及链接"><a href="#涉及链接" class="headerlink" title="涉及链接"></a>涉及链接</h2><ul>
<li><a href="http://wowubuntu.com/markdown/#philosophy" target="_blank" rel="noopener">Markdown入门语法说明</a></li>
<li><a href="http://zespia.tw/hexo/docs/" target="_blank" rel="noopener">Hexo用法文档</a></li>
<li><a href="https://github.com/youfei/pacmanBlue" target="_blank" rel="noopener">本博客所用主题pacmanBlue</a></li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://38sr.com/2014/03/24/使用hexo工具在github上搭建个人博客系统/" data-id="cjbc9sv0e002vyoqbh7zf1la7" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/2/">&laquo; Anterior</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/">Siguiente  &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">Recientes</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/05/19/小记/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2016/05/19/小记/" class="title">小记</a></p>
                            <p class="item-date"><time datetime="2016-05-19T11:22:32.000Z" itemprop="datePublished">2016-05-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/02/25/用nodejs模拟v2ex登录并获取福利/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/代码/">代码</a></p>
                            <p class="item-title"><a href="/2016/02/25/用nodejs模拟v2ex登录并获取福利/" class="title">用nodejs模拟v2ex登录并获取福利</a></p>
                            <p class="item-date"><time datetime="2016-02-25T12:02:32.000Z" itemprop="datePublished">2016-02-25</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/02/21/nodejs学习笔记(5) - nodejs模拟登录和发帖/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/代码/">代码</a></p>
                            <p class="item-title"><a href="/2016/02/21/nodejs学习笔记(5) - nodejs模拟登录和发帖/" class="title">nodejs学习笔记(5) - nodejs模拟登录和发帖</a></p>
                            <p class="item-date"><time datetime="2016-02-21T03:29:32.000Z" itemprop="datePublished">2016-02-21</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/02/18/background-attachment是个什么东东？/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/代码/">代码</a></p>
                            <p class="item-title"><a href="/2016/02/18/background-attachment是个什么东东？/" class="title">background-attachment是个什么东东？</a></p>
                            <p class="item-date"><time datetime="2016-02-18T13:49:32.000Z" itemprop="datePublished">2016-02-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/01/23/6个让内容垂直居中的方法/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/代码/">代码</a></p>
                            <p class="item-title"><a href="/2016/01/23/6个让内容垂直居中的方法/" class="title">6个让内容垂直居中的方法</a></p>
                            <p class="item-date"><time datetime="2016-01-23T11:15:32.000Z" itemprop="datePublished">2016-01-23</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">Categorias</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/代码/">代码</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器/">服务器</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活小记/">生活小记</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/畅游互联网/">畅游互联网</a><span class="category-list-count">36</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">Links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 Forest Cho<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>